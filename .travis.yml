jdk: oraclejdk8

language: scala

scala: 2.12.3

cache:
  directories:
    - "$HOME/.ivy2/cache"
    - "$HOME/.sbt/boot/"

jobs:
  include:
 
    - stage: test
      env:
        - NAME="Assert project version is not overriden manually"
      script: ./src/scripts/assert_project_version_not_overriden.sh

    - stage: test
      env:
        - NAME="Run unit tests"
      script: sbt ++$TRAVIS_SCALA_VERSION clean coverage test coverageReport coverageAggregate codacyCoverage

    - stage: publish
      env:
        - NAME="Publish build artifacts"
      script: curl -O https://gist.githubusercontent.com/EmilDafinov/c874e7f3abe77dd770c2bd26828b9224/raw/f75b659d1a2c3634140eace2c7899dc634e2790b/travis_bintray_credentials.sh &&
              chmod +x travis_bintray_credentials.sh &&
              ./travis_bintray_credentials.sh &&sbt ++$TRAVIS_SCALA_VERSION bintrayEnsureCredentials publish bintraySyncMavenCentral


notifications:
  email: false
